<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Faraday::Connection</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Faraday::Connection</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/faraday/connection_rb.html">
                lib/faraday/connection.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="../Object.html">
                Object
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000171">URI</a>&nbsp;&nbsp;
      <a href="#M000163">app</a>&nbsp;&nbsp;
      <a href="#M000166">authorization</a>&nbsp;&nbsp;
      <a href="#M000164">basic_auth</a>&nbsp;&nbsp;
      <a href="#M000177">build_exclusive_url</a>&nbsp;&nbsp;
      <a href="#M000175">build_request</a>&nbsp;&nbsp;
      <a href="#M000176">build_url</a>&nbsp;&nbsp;
      <a href="#M000167">default_parallel_manager</a>&nbsp;&nbsp;
      <a href="#M000178">dup</a>&nbsp;&nbsp;
      <a href="#M000162">headers=</a>&nbsp;&nbsp;
      <a href="#M000169">in_parallel</a>&nbsp;&nbsp;
      <a href="#M000168">in_parallel?</a>&nbsp;&nbsp;
      <a href="#M000160">new</a>&nbsp;&nbsp;
      <a href="#M000161">params=</a>&nbsp;&nbsp;
      <a href="#M000173">path_prefix=</a>&nbsp;&nbsp;
      <a href="#M000170">proxy</a>&nbsp;&nbsp;
      <a href="#M000174">run_request</a>&nbsp;&nbsp;
      <a href="#M000165">token_auth</a>&nbsp;&nbsp;
      <a href="#M000172">url_prefix=</a>&nbsp;&nbsp;
      <a href="#M000179">with_uri_credentials</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">METHODS</td>
          <td>=</td>
          <td class="context-item-value">Set.new [:get, :post, :put, :delete, :head, :patch, :options]</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">METHODS_WITH_BODIES</td>
          <td>=</td>
          <td class="context-item-value">Set.new [:post, :put, :patch, :options]</td>
        </tr>
        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">builder</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">default_parallel_manager</td>
          <td class="context-item-value">&nbsp;[W]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">headers</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">options</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">parallel_manager</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">params</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">ssl</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">url_prefix</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000171" class="method-detail">
        <a name="M000171"></a>

        <div class="method-heading">
          <a href="Connection.src/M000171.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000171.html');return false;">
          <span class="method-name">URI</span><span class="method-args">(url)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
normalize <a href="Connection.html#M000171">URI</a>() behavior across Ruby
versions
</p>
        </div>
      </div>

      <div id="method-M000160" class="method-detail">
        <a name="M000160"></a>

        <div class="method-heading">
          <a href="Connection.src/M000160.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000160.html');return false;">
          <span class="method-name">new</span><span class="method-args">(url = nil, options = {}) {|self if block_given?| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Public: Initializes a <a href="Connection.html#M000160">new</a> <a
href="Connection.html">Faraday::Connection</a>.
</p>
<p>
url - <a href="Connection.html#M000171">URI</a> or String base URL to use
as a prefix for all
</p>
<pre>
          requests (optional).
</pre>
<p>
options - Hash of settings that will be applied to every request made
</p>
<pre>
          from this Connection (default: {}).
          :url     - URI or String base URL (default: &quot;http:/&quot;).
          :params  - Hash of URI query unencoded key/value pairs.
          :headers - Hash of unencoded HTTP header key/value pairs.
          :request - Hash of request options.
          :ssl     - Hash of SSL options.
          :proxy   - URI, String or Hash of HTTP proxy options
                    (default: &quot;http_proxy&quot; environment variable).
                    :uri      - URI or String
                    :user     - String (optional)
                    :password - String (optional)
</pre>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000163" class="method-detail">
        <a name="M000163"></a>

        <div class="method-heading">
          <a href="Connection.src/M000163.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000163.html');return false;">
          <span class="method-name">app</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The &quot;rack <a href="Connection.html#M000163">app</a>&quot; wrapped in
middleware. All requests are sent here.
</p>
<p>
The builder is responsible for creating the <a
href="Connection.html#M000163">app</a> object. After this, the builder gets
locked to ensure no further modifications are made to the middleware stack.
</p>
<p>
Returns an object that responds to `call` and returns a <a
href="Response.html">Response</a>.
</p>
        </div>
      </div>

      <div id="method-M000166" class="method-detail">
        <a name="M000166"></a>

        <div class="method-heading">
          <a href="Connection.src/M000166.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000166.html');return false;">
          <span class="method-name">authorization</span><span class="method-args">(type, token)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000164" class="method-detail">
        <a name="M000164"></a>

        <div class="method-heading">
          <a href="Connection.src/M000164.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000164.html');return false;">
          <span class="method-name">basic_auth</span><span class="method-args">(login, pass)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000177" class="method-detail">
        <a name="M000177"></a>

        <div class="method-heading">
          <a href="Connection.src/M000177.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000177.html');return false;">
          <span class="method-name">build_exclusive_url</span><span class="method-args">(url, params = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Internal: Build an absolute URL based on url_prefix.
</p>
<p>
url - A String or <a href="Connection.html#M000171">URI</a>-like object
params - A <a href="../ParamsHash.html">Faraday::Utils::ParamsHash</a> to
replace the query values
</p>
<pre>
         of the resulting url (default: nil).
</pre>
<p>
Returns the resulting <a href="Connection.html#M000171">URI</a> instance.
</p>
        </div>
      </div>

      <div id="method-M000175" class="method-detail">
        <a name="M000175"></a>

        <div class="method-heading">
          <a href="Connection.src/M000175.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000175.html');return false;">
          <span class="method-name">build_request</span><span class="method-args">(method) {|req if block_given?| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Internal: Creates and configures the request object.
</p>
<p>
Returns the <a href="Connection.html#M000160">new</a> <a
href="Request.html">Request</a>.
</p>
        </div>
      </div>

      <div id="method-M000176" class="method-detail">
        <a name="M000176"></a>

        <div class="method-heading">
          <a href="Connection.src/M000176.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000176.html');return false;">
          <span class="method-name">build_url</span><span class="method-args">(url, extra_params = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Takes a relative url for a request and combines it with the defaults set on
the connection instance.
</p>
<pre>
  conn = Faraday::Connection.new { ... }
  conn.url_prefix = &quot;https://sushi.com/api?token=abc&quot;
  conn.scheme      # =&gt; https
  conn.path_prefix # =&gt; &quot;/api&quot;

  conn.build_url(&quot;nigiri?page=2&quot;)      # =&gt; https://sushi.com/api/nigiri?token=abc&amp;page=2
  conn.build_url(&quot;nigiri&quot;, :page =&gt; 2) # =&gt; https://sushi.com/api/nigiri?token=abc&amp;page=2
</pre>
        </div>
      </div>

      <div id="method-M000167" class="method-detail">
        <a name="M000167"></a>

        <div class="method-heading">
          <a href="Connection.src/M000167.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000167.html');return false;">
          <span class="method-name">default_parallel_manager</span><span class="method-args">() {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Internal: Traverse the middleware stack in search of a parallel-capable
adapter.
</p>
<p>
Yields in case of not found.
</p>
<p>
Returns a parallel manager or nil if not found.
</p>
        </div>
      </div>

      <div id="method-M000178" class="method-detail">
        <a name="M000178"></a>

        <div class="method-heading">
          <a href="Connection.src/M000178.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000178.html');return false;">
          <span class="method-name">dup</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000162" class="method-detail">
        <a name="M000162"></a>

        <div class="method-heading">
          <a href="Connection.src/M000162.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000162.html');return false;">
          <span class="method-name">headers=</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Public: Replace default request headers.
</p>
        </div>
      </div>

      <div id="method-M000169" class="method-detail">
        <a name="M000169"></a>

        <div class="method-heading">
          <a href="Connection.src/M000169.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000169.html');return false;">
          <span class="method-name">in_parallel</span><span class="method-args">(manager = nil) {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000168" class="method-detail">
        <a name="M000168"></a>

        <div class="method-heading">
          <a href="Connection.src/M000168.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000168.html');return false;">
          <span class="method-name">in_parallel?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000161" class="method-detail">
        <a name="M000161"></a>

        <div class="method-heading">
          <a href="Connection.src/M000161.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000161.html');return false;">
          <span class="method-name">params=</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Public: Replace default query parameters.
</p>
        </div>
      </div>

      <div id="method-M000173" class="method-detail">
        <a name="M000173"></a>

        <div class="method-heading">
          <a href="Connection.src/M000173.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000173.html');return false;">
          <span class="method-name">path_prefix=</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the path prefix always has a leading but no trailing slash
</p>
        </div>
      </div>

      <div id="method-M000170" class="method-detail">
        <a name="M000170"></a>

        <div class="method-heading">
          <a href="Connection.src/M000170.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000170.html');return false;">
          <span class="method-name">proxy</span><span class="method-args">(arg = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000174" class="method-detail">
        <a name="M000174"></a>

        <div class="method-heading">
          <a href="Connection.src/M000174.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000174.html');return false;">
          <span class="method-name">run_request</span><span class="method-args">(method, url, body, headers) {|req if block_given?| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000165" class="method-detail">
        <a name="M000165"></a>

        <div class="method-heading">
          <a href="Connection.src/M000165.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000165.html');return false;">
          <span class="method-name">token_auth</span><span class="method-args">(token, options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000172" class="method-detail">
        <a name="M000172"></a>

        <div class="method-heading">
          <a href="Connection.src/M000172.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000172.html');return false;">
          <span class="method-name">url_prefix=</span><span class="method-args">(url)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Parses the giving url with <a href="Connection.html#M000171">URI</a> and
stores the individual components in this connection. These components serve
as defaults for requests made by this connection.
</p>
<pre>
  conn = Faraday::Connection.new { ... }
  conn.url_prefix = &quot;https://sushi.com/api&quot;
  conn.scheme      # =&gt; https
  conn.path_prefix # =&gt; &quot;/api&quot;

  conn.get(&quot;nigiri?page=2&quot;) # accesses https://sushi.com/api/nigiri
</pre>
        </div>
      </div>

      <div id="method-M000179" class="method-detail">
        <a name="M000179"></a>

        <div class="method-heading">
          <a href="Connection.src/M000179.html" target="Code" class="method-signature"
            onclick="popupCode('Connection.src/M000179.html');return false;">
          <span class="method-name">with_uri_credentials</span><span class="method-args">(uri) {|Utils.unescape(uri.user), Utils.unescape(uri.password)| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Internal: Yields username and password extracted from a <a
href="Connection.html#M000171">URI</a> if they both exist.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>